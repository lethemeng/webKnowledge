### [如何将一个长URL转换为一个短URL](https://blog.csdn.net/xlgen157387/article/details/80026452)

设计方案： 通过发号机制，每个长地址发一个号

（1）利用放号器，初始值为0，对于每一个短链接生成请求，都递增放号器的值，再将此值转换为62进制（a-zA-Z0-9），比如第一次请求时放号器的值为0，对应62进制为a，第二次请求时放号器的值为1，对应62进制为b，第10001次请求时放号器的值为10000，对应62进制为sBc。

（2）将短链接服务器域名与放号器的62进制值进行字符串连接，即为短链接的URL，比如：t.cn/sBc。

（3）重定向过程：生成短链接之后，需要存储短链接到长链接的映射关系，即sBc -> URL，浏览器访问短链接服务器时，根据URL Path取到原始的链接，然后进行302重定向。映射关系可使用K-V存储，比如Redis或Memcache。

几个问题：

1、如何保证每次转换的都是同个一个地址？

- 建立hashtable，长短一一对应
- key-value 存储最近最常使用的键值对，保存最常使用的连接 

2、如何保证并发？**可伸缩和高可用**

利用数据库分片的设计思想，可部署多个发号器实例，每个实例负责特定号段的发号，比如部署10台Redis，每台分别负责号段尾号为0-9的发号，注意此时发号器的步长则应该设置为10（实例个数）。

3、301 跳转还是 302？

301 是永久重定向，